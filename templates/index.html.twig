{% extends 'base.html.twig' %}

{% block title %}Welcome to SymfonyShop!{% endblock %}

{% block body %}
<!-- Tailwind Test -->
<div class="bg-blue-500 text-white p-4 mb-4">
    <h2 class="text-2xl font-bold">Tailwind CSS Test</h2>
    <p class="text-sm">This should be styled with Tailwind classes</p>
</div>
<div class="row">
    <section id="billboard" class="position-relative overflow-hidden bg-light-blue">
        <div class="swiper main-swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <div class="container">
                        <div class="row d-flex align-items-center">
                            <div class="col-md-6">
                                <div class="banner-content">
                                    <h1 class="display-2 text-uppercase text-dark pb-5">Your Products Are Great.</h1>
                                    <a href="{{ path('app_home') }}"
                                        class="btn btn-medium btn-dark text-uppercase btn-rounded-none">Shop Product</a>
                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="image-holder">
                                    <img src="{{ asset('img/banner-image.png') }}" alt="banner">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="container">
                        <div class="row d-flex flex-wrap align-items-center">
                            <div class="col-md-6">
                                <div class="banner-content">
                                    <h1 class="display-2 text-uppercase text-dark pb-5">Technology Hack You Won't Get
                                    </h1>
                                    <a href="{{ path('app_home') }}"
                                        class="btn btn-medium btn-dark text-uppercase btn-rounded-none">Shop Product</a>
                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="image-holder">
                                    <img src="{{ asset('img/banner-image.png') }}" alt="banner">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-icon swiper-arrow swiper-arrow-prev">
            <svg class="chevron-left">
                <use xlink:href="#chevron-left" />
            </svg>
        </div>
        <div class="swiper-icon swiper-arrow swiper-arrow-next">
            <svg class="chevron-right">
                <use xlink:href="#chevron-right" />
            </svg>
        </div>
    </section>
    <section id="company-services" class="padding-large">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 pb-3">
                    <div class="icon-box d-flex">
                        <div class="icon-box-icon pe-3 pb-3">
                            <svg class="cart-outline">
                                <use xlink:href="#cart-outline" />
                            </svg>
                        </div>
                        <div class="icon-box-content">
                            <h3 class="card-title text-uppercase text-dark">Free delivery</h3>
                            <p>Consectetur adipi elit lorem ipsum dolor sit amet.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 pb-3">
                    <div class="icon-box d-flex">
                        <div class="icon-box-icon pe-3 pb-3">
                            <svg class="quality">
                                <use xlink:href="#quality" />
                            </svg>
                        </div>
                        <div class="icon-box-content">
                            <h3 class="card-title text-uppercase text-dark">Quality guarantee</h3>
                            <p>Dolor sit amet orem ipsu mcons ectetur adipi elit.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 pb-3">
                    <div class="icon-box d-flex">
                        <div class="icon-box-icon pe-3 pb-3">
                            <svg class="price-tag">
                                <use xlink:href="#price-tag" />
                            </svg>
                        </div>
                        <div class="icon-box-content">
                            <h3 class="card-title text-uppercase text-dark">Daily offers</h3>
                            <p>Amet consectetur adipi elit loreme ipsum dolor sit.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 pb-3">
                    <div class="icon-box d-flex">
                        <div class="icon-box-icon pe-3 pb-3">
                            <svg class="shield-plus">
                                <use xlink:href="#shield-plus" />
                            </svg>
                        </div>
                        <div class="icon-box-content">
                            <h3 class="card-title text-uppercase text-dark">100% secure payment</h3>
                            <p>Rem Lopsum dolor sit amet, consectetur adipi elit.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8">
        {% if products is defined %}
            {% for product in products|slice(0, 4) %}
                <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300">
                    <div class="p-6 flex justify-center">
                        <img src="{{ product.imagePath }}" 
                             class="w-48 h-48 object-cover rounded-lg"
                             alt="{{ product.title }}">
                    </div>
                    <div class="px-4 pb-4">
                        <h5 class="text-lg font-semibold text-gray-900 text-center mb-2">{{ product.title }}</h5>
                        <p class="text-xl font-bold text-gray-800 text-center mb-4">{{ product.price }} â‚¬</p>
                        <div class="flex flex-col items-center space-y-3">
                            <select class="w-full px-3 py-2 my-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                {% for i in 1..5 %}
                                    <option class="quantity" value="{{ i }}">{{ i }}</option>
                                {% endfor %}
                            </select>
                            <input type="hidden" class="product" value="{{ product.id }}" />
                            <button class="w-full !bg-green-600 hover:!bg-green-700 !text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 add-to-cart my-2" style="background-color: #16a34a !important;">
                                Add to cart
                            </button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="col-span-full">
                <h5 class="text-center text-gray-600 text-lg">No products</h5>
            </div>
        {% endif %}
    </div>
</div>
<script>
    $(document).ready(function() {
      $('.add-to-cart').on('click', function(e) {
        let product =  $(this).prev().val();
        let quantity = $(this).closest('.card').find('.quantity:selected').val();
        console.log(product);
        console.log(quantity);
        $.ajax({
          method: 'POST',
          url: `api/cart/add/${product}`,
          datatype: 'JSON',
          data: {
            quantity: quantity
          },
          success: function(result) {
            let cartCount = result.items;
            $('.cart-count').text(cartCount);
        }                          
    });
  });
});
</script>
{% endblock %}
